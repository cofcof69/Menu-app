<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MENU</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  color:#fff;
  background:url('IMG_7404.jpeg') no-repeat center center fixed;
  background-size:cover;
}
.overlay{
  background:rgba(0,0,0,0.75);
  min-height:100vh;
  padding:20px;
  max-width:650px;
  margin:auto;
}
h1{text-align:center;margin-top:10px}
.section{
  background:rgba(0,0,0,0.5);
  border:1px solid rgba(255,255,255,0.2);
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
}
button{
  width:100%;
  padding:14px;
  margin-top:10px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  font-size:16px;
  cursor:pointer;
  background:#1e90ff;
  color:white;
}
button.secondary{
  background:rgba(255,255,255,0.15);
}
input,textarea{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.3);
  background:rgba(0,0,0,0.4);
  color:white;
  margin-top:8px;
}
.hidden{display:none}
.center{text-align:center}
.small{font-size:13px;opacity:0.8}
</style>
</head>

<body>
<div class="overlay">

<h1>MENU OFFICIEL</h1>

<!-- MENU PRINCIPAL -->
<div class="section">
  <button onclick="showSection('order')">Commander</button>
  <button class="secondary" onclick="showSection('lottery')">üé∞ Roue</button>
  <button class="secondary" onclick="showSection('referral')">Programme Partenaire</button>
  <button class="secondary" onclick="showSection('contest')">Concours 15 jours</button>
  <button class="secondary" onclick="showSection('postal')">üì¶ Envoi postal</button>
  <button class="secondary" onclick="showSection('apply')">Rejoindre l'√©quipe</button>
  <button class="secondary" onclick="showSection('support')">Service Client</button>
  <button class="secondary" onclick="shareSite()">Partager ce site</button>
</div>

<!-- COMMANDE -->
<div id="order" class="section hidden">
  <h3>Commande</h3>
  <select id="sector">
    <option value="69">Menu 69</option>
    <option value="71">Menu 71</option>
  </select>

  <select id="mode">
    <option value="pickup">Sur place</option>
    <option value="delivery">Livraison</option>
  </select>

  <textarea id="details" placeholder="D√©tail de la commande..."></textarea>

  <button onclick="sendOrder()">COMMANDER</button>
<!-- LOTERIE -->
<div id="lottery" class="section hidden">
  <h3>üé∞ Roue Hebdomadaire</h3>
  <p class="small">
  1 tour maximum par semaine.<br>
  Gain valable uniquement apr√®s validation r√©elle du livreur.
  </p>

  <input id="validationCode" placeholder="Code validation livreur">
  <button onclick="validateAndSpin()">Valider & Lancer</button>

  <div id="lotteryResult" class="center" style="margin-top:10px;font-weight:bold;"></div>
</div>

<!-- PARRAINAGE -->
<div id="referral" class="section hidden">
  <h3>Programme Partenaire</h3>
  <p>Ton code :</p>
  <div id="myCode" style="font-weight:bold;"></div>
  <p>Filleuls valid√©s : <span id="refCount">0</span></p>
  <p id="rewardStatus"></p>
  <button onclick="simulateReferral()">Simuler validation filleul (test)</button>
</div>

<!-- CONCOURS -->
<div id="contest" class="section hidden">
  <h3>Concours Cr√©atif</h3>
  <p>
  Poste ta meilleure pub.<br>
  Tirage tous les 15 jours.<br>
  Lot change √† chaque session.
  </p>
  <button onclick="contactContest()">Participer</button>
</div>

<!-- ENVOI POSTAL -->
<div id="postal" class="section hidden">
  <h3>Envoi Postal France</h3>
  <textarea id="postalDetails" placeholder="Adresse compl√®te + contenu commande"></textarea>
  <button onclick="sendPostal()">Envoyer demande</button>
</div>

<!-- RECRUTEMENT -->
<div id="apply" class="section hidden">
  <h3>Rejoindre l'√©quipe</h3>
  <textarea id="applyText" placeholder="Explique ta candidature..."></textarea>
  <button onclick="sendApplication()">Envoyer candidature</button>
</div>

<!-- SUPPORT -->
<div id="support" class="section hidden">
  <h3>Service Client</h3>
  <textarea id="supportText" placeholder="Message..."></textarea>
  <button onclick="sendSupport()">Envoyer</button>
</div>

</div>

<script>
const WHATSAPP_NUMBER = "33600000000"; // NUMERO TEST

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function sendOrder(){
  const sector = document.getElementById("sector").value;
  const mode = document.getElementById("mode").value;
  const details = document.getElementById("details").value;
  const orderId = "ORD-" + Date.now();

  const message = `
Nouvelle commande
ID: ${orderId}
Secteur: ${sector}
Mode: ${mode}
D√©tails: ${details}

Validation roue obligatoire apr√®s accord livreur.
`;

  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`);
}

/* ===== LOTERIE ===== */

function validateAndSpin(){
  const code = document.getElementById("validationCode").value;
  const lastSpin = localStorage.getItem("lastSpin");
  const now = Date.now();

  if(lastSpin && (now - lastSpin < 7*24*60*60*1000)){
    document.getElementById("lotteryResult").innerText =
    "D√©j√† jou√© cette semaine.";
    return;
  }

  if(code !== "VALID123"){ // CODE TEST
    document.getElementById("lotteryResult").innerText =
    "Code invalide.";
    return;
  }

  localStorage.setItem("lastSpin", now);

  const prizes = [
    {label:"üéÅ 100 meuje filtre", p:0.05},
    {label:"üéÅ -90% catalogue", p:0.05},
    {label:"üéÅ Livraison gratuite", p:10},
    {label:"üéÅ Starter pack", p:25},
    {label:"üòÖ Pas gagn√©", p:64.9}
  ];

  const r = Math.random()*100;
  let sum = 0;
  for(let prize of prizes){
    sum += prize.p;
    if(r<=sum){
      document.getElementById("lotteryResult").innerText =
      prize.label + " (valable apr√®s v√©rification)";
      break;
    }
  }
}

/* ===== PARRAINAGE ===== */

let refCount = localStorage.getItem("refCount") || 0;
document.getElementById("refCount").innerText = refCount;

const myCode = "REF-" + Math.random().toString(36).substring(2,8).toUpperCase();
document.getElementById("myCode").innerText = myCode;

function simulateReferral(){
  refCount++;
  localStorage.setItem("refCount", refCount);
  document.getElementById("refCount").innerText = refCount;
  updateReward();
}

function updateReward(){
  let text="";
  if(refCount>=10) text="R√©compense: -100‚Ç¨";
  else if(refCount>=5) text="-30‚Ç¨ d√©bloqu√©";
  else if(refCount>=3) text="-20‚Ç¨ d√©bloqu√©";
  else text="Prochain palier: 3 filleuls";
  document.getElementById("rewardStatus").innerText=text;
}
updateReward();

/* ===== AUTRES SECTIONS ===== */

function shareSite(){
  const link = window.location.href;
  window.open(`https://wa.me/?text=${encodeURIComponent("D√©couvre le site : "+link)}`);
}

function contactContest(){
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=Je participe au concours`);
}

function sendPostal(){
  const txt=document.getElementById("postalDetails").value;
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent("Envoi postal : "+txt)}`);
}

function sendApplication(){
  const txt=document.getElementById("applyText").value;
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent("Candidature : "+txt)}`);
}

function sendSupport(){
  const txt=document.getElementById("supportText").value;
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent("Service client : "+txt)}`);
}
</script>

</body>
</html>
