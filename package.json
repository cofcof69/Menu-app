import { Telegraf, Markup } from "telegraf";

const bot = new Telegraf(process.env.BOT_TOKEN);

// IMPORTANT : mets ton URL Vercel ici via Render (Environment Variables)
const WEBAPP_URL = process.env.WEBAPP_URL;

bot.start((ctx) => {
  if (!WEBAPP_URL) {
    return ctx.reply("âŒ WEBAPP_URL manquant sur Render (Environment Variables).");
  }

  return ctx.reply(
    "âœ… Bot en ligne. Clique pour commander ğŸ‘‡",
    Markup.inlineKeyboard([
      Markup.button.webApp("ğŸ›’ Commander", WEBAPP_URL)
    ])
  );
});

// (optionnel) si la mini-app envoie des donnÃ©es au bot plus tard
bot.on("message", (ctx) => ctx.reply("âœ… ReÃ§u."));

bot.launch();
console.log("Bot running ğŸš€");
